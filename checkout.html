<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet" />
  <title>Finalizar Compra - T3rrifier</title>

  <style>
    @font-face {
      font-family: "Oswald";
      src: url("./fontes/Oswald-Regular.ttf") format("truetype");
      font-style: 400;
    }
    @font-face {
      font-family: "Quicksand";
      src: url("./fontes/Quicksand-Regular.ttf") format("truetype");
      font-weight: 400;
    }
    @font-face {
      font-family: "Quicksand";
      src: url("./fontes/Quicksand-Bold.ttf") format("truetype");
      font-weight: 700;
    }

    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 50%, #0a0a0a 100%);
      min-height: 100vh;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(149, 0, 249, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(149, 0, 249, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }

    .step {
      opacity: 0.5;
      transition: all 0.3s ease;
    }

    .step.active {
      opacity: 1;
      transform: scale(1.1);
    }

    .step.completed {
      opacity: 1;
    }

    .payment-option {
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .payment-option:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(149, 0, 249, 0.3);
    }

    .payment-option.selected {
      border-color: #9500f9;
      background-color: rgba(149, 0, 249, 0.1);
    }

    input:focus {
      outline: none;
      border-color: #9500f9;
      box-shadow: 0 0 0 3px rgba(149, 0, 249, 0.2);
    }

    .success-animation {
      animation: successPop 0.6s ease;
    }

    @keyframes successPop {
      0% {
        transform: scale(0);
        opacity: 0;
      }
      50% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            oswald: ["Oswald", "sans-serif"],
            quicksand: ["Quicksand", "sans-serif"],
          },
        },
      },
    };
  </script>
</head>

<body class="bg-[#0f0f0f] pt-20">
  <!-- Header -->
  <div class="fixed top-0 left-0 right-0 z-50 w-full bg-[#0f0f0f]">
    <nav class="w-full md:max-w-[1080px] max-w-[410px] md:justify-between md:mx-auto h-20 flex items-center justify-between px-4 md:px-0">
      <img class="w-[225px] hidden md:flex" src="t3logo.png" alt="" />
      <img class="w-[175px] block md:hidden" src="t3logo.png" alt="" />
      
      <div class="flex space-x-5 items-center">
        <a href="carrinho.html" class="relative">
          <img class="w-[22px] h-[27px]" src="./imgheader/compra.svg" alt="" />
        </a>
        <a href="loginpage.html"><img class="w-[30px] h-[30px]" src="./imgheader/person.svg" alt="" /></a>
      </div>
    </nav>
    <hr class="h-[1px] border-[#2b2b2b]" />
  </div>

  <!-- Main Content -->
  <div class="max-w-[1080px] mx-auto px-4 py-8 mt-12 relative z-10">
    <a href="carrinho.html" class="text-purple-400 hover:text-purple-300 mb-6 inline-block">‚Üê Voltar ao carrinho</a>

    <!-- Progress Steps -->
    <div class="flex items-center justify-center mb-12 mt-8">
      <div class="flex items-center gap-4">
        <div class="step active flex flex-col items-center">
          <div class="w-12 h-12 rounded-full bg-purple-700 flex items-center justify-center text-white font-bold mb-2">1</div>
          <span class="text-white text-sm font-quicksand">Dados</span>
        </div>
        <div class="w-16 h-1 bg-[#3b3b3b]"></div>
        <div id="step2" class="step flex flex-col items-center">
          <div class="w-12 h-12 rounded-full bg-[#3b3b3b] flex items-center justify-center text-white font-bold mb-2">2</div>
          <span class="text-gray-500 text-sm font-quicksand">Pagamento</span>
        </div>
        <div class="w-16 h-1 bg-[#3b3b3b]"></div>
        <div id="step3" class="step flex flex-col items-center">
          <div class="w-12 h-12 rounded-full bg-[#3b3b3b] flex items-center justify-center text-white font-bold mb-2">3</div>
          <span class="text-gray-500 text-sm font-quicksand">Confirma√ß√£o</span>
        </div>
      </div>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      <!-- Form Section -->
      <div class="md:col-span-2">
        <!-- Personal Data -->
        <div id="personalData" class="bg-[#1a1a1a] p-6 rounded-2xl mb-6">
          <h2 class="text-2xl font-oswald font-bold text-white mb-6">üìã DADOS PESSOAIS</h2>
          
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Nome Completo *</label>
              <input type="text" id="name" placeholder="Jo√£o Silva" 
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">CPF *</label>
              <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Email *</label>
              <input type="email" id="email" placeholder="joao@email.com"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Telefone *</label>
              <input type="tel" id="phone" placeholder="(11) 99999-9999" maxlength="15"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
          </div>

          <h3 class="text-xl font-oswald font-bold text-white mt-8 mb-4">üè† ENDERE√áO DE ENTREGA</h3>
          
          <div class="grid md:grid-cols-3 gap-4">
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">CEP *</label>
              <input type="text" id="cep" placeholder="00000-000" maxlength="9"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div class="md:col-span-2">
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Rua *</label>
              <input type="text" id="street" placeholder="Rua Example"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">N√∫mero *</label>
              <input type="text" id="number" placeholder="123"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div class="md:col-span-2">
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Complemento</label>
              <input type="text" id="complement" placeholder="Apto 45"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Bairro *</label>
              <input type="text" id="neighborhood" placeholder="Centro"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Cidade *</label>
              <input type="text" id="city" placeholder="S√£o Paulo"
                     class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
            </div>
            <div>
              <label class="text-gray-400 text-sm font-quicksand mb-2 block">Estado *</label>
              <select id="state" class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
                <option value="">Selecione</option>
                <option value="SP">SP</option>
                <option value="RJ">RJ</option>
                <option value="MG">MG</option>
                <option value="RS">RS</option>
              </select>
            </div>
          </div>

          <button onclick="goToPayment()" 
                  class="w-full mt-6 bg-purple-700 hover:bg-purple-800 text-white py-4 rounded-xl font-quicksand font-bold text-lg transition-all">
            CONTINUAR PARA PAGAMENTO ‚Üí
          </button>
        </div>

        <!-- Payment Section (Hidden) -->
        <div id="paymentSection" class="bg-[#1a1a1a] p-6 rounded-2xl mb-6 hidden">
          <h2 class="text-2xl font-oswald font-bold text-white mb-6">üí≥ FORMA DE PAGAMENTO</h2>
          
          <div class="grid md:grid-cols-2 gap-4 mb-6">
            <div class="payment-option bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-xl p-6 text-center" onclick="selectPayment('pix')">
              <div class="text-5xl mb-3">üì±</div>
              <h3 class="text-white font-quicksand font-bold text-lg mb-2">PIX</h3>
              <p class="text-gray-400 text-sm">Aprova√ß√£o imediata</p>
            </div>
            
            <div class="payment-option bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-xl p-6 text-center" onclick="selectPayment('card')">
              <div class="text-5xl mb-3">üí≥</div>
              <h3 class="text-white font-quicksand font-bold text-lg mb-2">Cart√£o de Cr√©dito</h3>
              <p class="text-gray-400 text-sm">At√© 3x sem juros</p>
            </div>
          </div>

          <!-- PIX Details (Hidden) -->
          <div id="pixDetails" class="hidden">
            <div class="bg-[#0f0f0f] border-2 border-purple-700 rounded-xl p-6 text-center">
              <p class="text-white font-quicksand mb-4">Escaneie o QR Code para pagar:</p>
              <div class="bg-white p-4 rounded-lg inline-block mb-4">
               <img src="qrcode.jpg" class="w-50 h-50 flex items-center justify-center text-6xl" alt="">
              </div>
              <p class="text-gray-400 text-sm mb-2">Ou copie o c√≥digo PIX:</p>
              <div class="bg-[#2b2b2b] p-3 rounded-lg text-purple-400 font-mono text-sm break-all">
                00020126580014BR.GOV.BCB.PIX...
              </div>
            </div>
          </div>

          <!-- Card Details (Hidden) -->
          <div id="cardDetails" class="hidden">
            <div class="space-y-4">
              <div>
                <label class="text-gray-400 text-sm font-quicksand mb-2 block">N√∫mero do Cart√£o</label>
                <input type="text" placeholder="0000 0000 0000 0000" maxlength="19"
                       class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
              </div>
              <div>
                <label class="text-gray-400 text-sm font-quicksand mb-2 block">Nome no Cart√£o</label>
                <input type="text" placeholder="JO√ÉO SILVA"
                       class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
              </div>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="text-gray-400 text-sm font-quicksand mb-2 block">Validade</label>
                  <input type="text" placeholder="MM/AA" maxlength="5"
                         class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
                </div>
                <div>
                  <label class="text-gray-400 text-sm font-quicksand mb-2 block">CVV</label>
                  <input type="text" placeholder="123" maxlength="3"
                         class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
                </div>
              </div>
              <div>
                <label class="text-gray-400 text-sm font-quicksand mb-2 block">Parcelas</label>
                <select class="w-full bg-[#0f0f0f] border-2 border-[#3b3b3b] rounded-lg px-4 py-3 text-white font-quicksand">
                  <option>1x sem juros</option>
                  <option>2x sem juros</option>
                  <option>3x sem juros</option>
                </select>
              </div>
            </div>
          </div>

          <button onclick="finalizePurchase()" 
                  class="w-full mt-6 bg-green-600 hover:bg-green-700 text-white py-4 rounded-xl font-quicksand font-bold text-lg transition-all">
            FINALIZAR COMPRA
          </button>

          <button onclick="backToData()" 
                  class="w-full mt-3 bg-[#3b3b3b] hover:bg-[#4b4b4b] text-white py-3 rounded-xl font-quicksand transition-all">
            ‚Üê VOLTAR
          </button>
        </div>

        <!-- Success Section (Hidden) -->
        <div id="successSection" class="bg-[#1a1a1a] p-8 rounded-2xl text-center hidden">
          <div class="success-animation">
            <div class="text-8xl mb-4">‚úÖ</div>
            <h2 class="text-3xl font-oswald font-bold text-white mb-4">PEDIDO CONFIRMADO!</h2>
            <p class="text-gray-400 font-quicksand mb-2">N√∫mero do pedido:</p>
            <p id="orderNumber" class="text-purple-400 font-quicksand font-bold text-2xl mb-6">#12345</p>
            <p class="text-gray-300 font-quicksand mb-8">
              Enviamos um email de confirma√ß√£o para voc√™.<br>
              Seu pedido ser√° enviado em at√© 3 dias √∫teis.
            </p>
            <a href="index.html#products" 
               class="inline-block bg-purple-700 hover:bg-purple-800 text-white px-8 py-4 rounded-xl font-quicksand font-bold transition-all">
              VOLTAR PARA LOJA
            </a>
          </div>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="md:col-span-1">
        <div class="bg-[#1a1a1a] p-6 rounded-2xl sticky top-24">
          <h3 class="text-xl font-oswald font-bold text-white mb-4">üì¶ RESUMO DO PEDIDO</h3>
          
          <div id="orderItems" class="space-y-3 mb-4 max-h-[300px] overflow-y-auto">
            <!-- Items will be loaded here -->
          </div>

          <hr class="border-[#3b3b3b] my-4">

          <div class="space-y-2 text-sm font-quicksand mb-4">
            <div class="flex justify-between text-gray-400">
              <span>Subtotal:</span>
              <span id="subtotal">R$ 0,00</span>
            </div>
            <div class="flex justify-between text-gray-400">
              <span>Frete:</span>
              <span class="text-green-400">GR√ÅTIS</span>
            </div>
          </div>

          <hr class="border-[#3b3b3b] my-4">

          <div class="flex justify-between text-xl font-bold">
            <span class="text-white">Total:</span>
            <span class="text-purple-400" id="total">R$ 0,00</span>
          </div>

          <div class="mt-6 bg-purple-900/30 border border-purple-700 rounded-lg p-4">
            <p class="text-purple-400 text-sm font-quicksand text-center">
              üéÅ Frete gr√°tis para todo Brasil!
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let selectedPaymentMethod = null;

    // Load cart items
    function loadOrderSummary() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const orderItems = document.getElementById('orderItems');
      
      if (cart.length === 0) {
        window.location.href = 'carrinho.html';
        return;
      }

      const groupedCart = cart.reduce((acc, item) => {
        const key = `${item.name}-${item.color}-${item.size || '?'}`;
        if (acc[key]) {
          acc[key].quantity += 1;
        } else {
          acc[key] = { ...item, size: item.size || '?', quantity: 1 };
        }
        return acc;
      }, {});

      const cartArray = Object.values(groupedCart);
      
      orderItems.innerHTML = cartArray.map(item => `
        <div class="flex justify-between items-start text-sm">
          <div class="flex-1">
            <p class="text-white font-quicksand">${item.name}</p>
            <p class="text-gray-400 text-xs">${item.color} ‚Ä¢ Tam: ${item.size}</p>
            <p class="text-gray-400 text-xs">Qtd: ${item.quantity}</p>
          </div>
          <p class="text-white font-bold">R$ ${(item.price * item.quantity).toFixed(2)}</p>
        </div>
      `).join('');

      const total = cart.reduce((sum, item) => sum + item.price, 0);
      document.getElementById('subtotal').textContent = `R$ ${total.toFixed(2)}`;
      document.getElementById('total').textContent = `R$ ${total.toFixed(2)}`;
    }

    // CPF Mask
    document.getElementById('cpf').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length <= 11) {
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d)/, '$1.$2');
        value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        e.target.value = value;
      }
    });

    // Phone Mask
    document.getElementById('phone').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length <= 11) {
        value = value.replace(/(\d{2})(\d)/, '($1) $2');
        value = value.replace(/(\d{5})(\d)/, '$1-$2');
        e.target.value = value;
      }
    });

    // CEP Mask
    document.getElementById('cep').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length <= 8) {
        value = value.replace(/(\d{5})(\d)/, '$1-$2');
        e.target.value = value;
      }
    });

    function goToPayment() {
      document.getElementById('personalData').classList.add('hidden');
      document.getElementById('paymentSection').classList.remove('hidden');
      document.getElementById('step2').classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function backToData() {
      document.getElementById('paymentSection').classList.add('hidden');
      document.getElementById('personalData').classList.remove('hidden');
      document.getElementById('step2').classList.remove('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function selectPayment(method) {
      selectedPaymentMethod = method;
      
      document.querySelectorAll('.payment-option').forEach(opt => {
        opt.classList.remove('selected');
      });
      
      event.currentTarget.classList.add('selected');
      
      document.getElementById('pixDetails').classList.add('hidden');
      document.getElementById('cardDetails').classList.add('hidden');
      
      if (method === 'pix') {
        document.getElementById('pixDetails').classList.remove('hidden');
      } else {
        document.getElementById('cardDetails').classList.remove('hidden');
      }
    }

    function finalizePurchase() {
      const orderNumber = Math.floor(Math.random() * 90000) + 10000;
      document.getElementById('orderNumber').textContent = `#${orderNumber}`;
      
      document.getElementById('paymentSection').classList.add('hidden');
      document.getElementById('successSection').classList.remove('hidden');
      document.getElementById('step3').classList.add('active');
      
      // Clear cart
      localStorage.removeItem('cart');
      
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    loadOrderSummary();
  </script>
</body>
</html>